syntax = "proto3";

package gtos.engine.v1;

option go_package = "github.com/tos-network/gtos/engineapi/proto;enginepb";

service EngineAPI {
  rpc GetPayload(GetPayloadRequest) returns (GetPayloadResponse);
  rpc NewPayload(NewPayloadRequest) returns (NewPayloadResponse);
  rpc ForkchoiceUpdated(ForkchoiceUpdatedRequest) returns (ForkchoiceUpdatedResponse);
}

message GetPayloadRequest {
  string parent_hash = 1;
  uint64 height = 2;
  uint64 timestamp = 3;
}

message GetPayloadResponse {
  bytes payload = 1;
  string payload_commitment = 2;
  string state_hash = 3;
  string receipts_hash = 4;
}

message NewPayloadRequest {
  bytes payload = 1;
  string parent_hash = 2;
}

message NewPayloadResponse {
  bool valid = 1;
  string state_hash = 2;
}

message ForkchoiceUpdatedRequest {
  string head_hash = 1;
  string safe_hash = 2;
  string finalized_hash = 3;
}

message ForkchoiceUpdatedResponse {}
